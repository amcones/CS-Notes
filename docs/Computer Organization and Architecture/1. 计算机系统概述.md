## 计算机系统层次结构

### 硬件

五大部件，冯诺伊曼计算机以运算器为中心，现代计算机以存储器为中心（使 I/O 操作绕开 CPU）。

### 软件

编译语言：预处理->编译->汇编->链接
解释语言：逐条解释成机器语言执行

### 基本工作原理

![硬件组成](https://ulipic-1258663779.cos.ap-shanghai.myqcloud.com/ulog/%E6%88%AA%E5%B1%8F2025-06-14%2022.13.54.png)

运算器中有 3 个通用寄存器：

1. ACC 累加寄存器
2. MQ 乘商寄存器
3. X 操作数寄存器

控制器中有 2 个通用寄存器：

1. PC 程序计数器
2. IR 指令寄存器

主存有 2 个寄存器：

1. MAR 地址寄存器
2. MDR 数据寄存器

程序执行过程中，PC 始终指向下一条要执行的指令地址，并在每次执行完后自增。假如指令要求取数：

1. IR 寄存器将地址码送到 MAR 进行寻址，数据被送入 MDR
2. MDR 内容送入 ACC

总之，每次操作都是类似地读指令，从 MDR 获取操作码（表示操作类型）和地址码（操作所需要的数据位置）分别送到 CU 和 MAR，CU 解析操作后生成控制信号，执行后续的将数据在寄存器之间转移、运算等操作。

### 多级层次结构

分层思想，一般分 6 层。

1. 高级语言层
2. 汇编语言层
3. 操作系统层
4. 指令集体系结构层（与机器码相关）
5. 微程序机器层
6. 逻辑电路层

上层实现对下层的 **功能扩展**。

## 计算机性能指标

分为 **基本性能指标** 和与 **运算速度相关的性能指标**。

???+ warning "注意"
    检查单位转换！尤其是秒的单位之间是 $10^3$ 关系！

- 基本性能指标：机器的基本属性
  1. 机器字长：与 ALU、通用寄存器长度相等，俗称 32 位、64 位计算机
  2. 主存容量：内存容量，假设 $M$ 个存储单元，每个存储单元可存储 $N$ 个二进制位（存储字长），容量为 $M*N$。
  3. 吞吐量：单位时间内能够处理的信息量
  4. 响应时间：从提交作业开始，到完成作业为止所需要的时间。由于难以区分，没有特别说明下基于 CPU 执行时间，即执行程序本身所花的时间。
- 运算速度相关的性能指标：与执行时间相关的指标
  1. 时钟频率/时钟周期：互为倒数，产生脉冲的速度
  2. **CPI**：操作执行所需要的 **平均** 时钟周期数量。如果是一条指令那就是这条指令的 CPI，如果是一段程序就是加权和。
  3. CPU 执行时间：真正用于执行用户程序的执行时间（不包括操作系统、访问内存外存、外部设备的时间）
  4. IPC：CPI 的倒数，每个时钟周期可以执行的指令数量（现在可大于 1）
  5. MIPS：每秒执行多少百万条指令
  6. MFLOPS：每秒执行多少百万次浮点运算。

核心是 CPI，有了 CPI 基本啥都能算。
